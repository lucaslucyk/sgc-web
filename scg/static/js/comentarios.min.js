const update_content = ['<textarea name="comentario" rows="2" class="form-control">', '</textarea>  <span class="input-group-append">    <button name="update_comment" type="submit" class="btn btn-info btn-flat">Guardar</button>    <button class="btn btn-secondary btn-flat" type="button" onclick="update_cancel(', ')">Cancelar</button>  </span>  ']; function urls_to_tags(t) { return t.replace(/\bhttp[s]?:\/\/([\w\.-]+\.)+[a-z]{2,}([\/\w\.\-\_\?\=\!\#,\&amp;]+)/gi, '<a style="display:contents;" target="_blank" href="$&">$&</a>') } function tags_to_urls(t) { return t.replace(/<a\ .+>(.+)<\/a>/gi, "$1") } function nl_to_br(t) { return t.replace("\n", "<br>") } function br_to_nl(t) { return t.replace("<br>", "\r\n") } function update_cancel(t) { var n = $("[form_group_id=" + t + "]"); n.html(function (t, a) { return urls_to_tags(nl_to_br(n.find("textarea").html())) }); $("[edit_id=" + t + "]").removeClass("disabled") } $("[btn_action=comment_update]").click(function (t) { t.preventDefault(), $(this).blur().addClass("disabled"); var n = $(this).attr("edit_id"), a = $("[form_group_id=" + n + "]"); a.html(function (t, e) { return update_content[0] + tags_to_urls(br_to_nl(a.html().trim())) + update_content[1] + n + update_content[2] }) }), $(function () { $("[searh_urls=true]").html(function (t, n) { return urls_to_tags(n) }) });