function get_labels(t) { var e = []; return $.each(t, function (t, a) { e.push(a.date) }), e } function prepare_values(t, e) { var a = {}; $.each(t, function (t, e) { a[e] = 0 }), $.each(e, function (t, e) { a[e.date] = e.quantity }); var n = []; return $.each(a, function (t, e) { n.push(e) }), n } function dates_to_names(t) { var e = []; return $.each(t, function (t, a) { e.push($.format.date(new Date(a.split("-")), "MMMM yyyy")) }), e } async function update_chart(t, e) { var a = document.getElementById(t).getContext("2d"), n = get_labels(e[0].results), o = { labels: dates_to_names(n), datasets: [] }; $.each(e, function (t, e) { var a = { label: e.label, backgroundColor: e.bgcolor, borderColor: e.color, pointBackgroundColor: e.color, data: prepare_values(n, e.results) }; o.datasets.push(a) }); new Chart(a, { type: "line", data: o, options: { pointSize: 10, pointHoverRadius: 5, pointHitRadius: 2, pointHoverBorderColor: "#999999", maintainAspectRatio: !1, responsive: !0, legend: { display: !0 }, scales: { xAxes: [{ gridLines: { display: !1 } }], yAxes: [{ gridLines: { display: !1 } }] } } }) } async function get_months_chart(t) { $.ajax({ type: "GET", dataType: "json", url: "/api/get/months-chart/", success: function (e) { update_chart(t, e.results) } }) } $(function () { get_months_chart("months-chart") });